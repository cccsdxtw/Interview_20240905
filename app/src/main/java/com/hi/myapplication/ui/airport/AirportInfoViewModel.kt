//飛機資料轉換 原本應該要接資料 現在先直接接ＪＯＳＮ


package com.hi.myapplication.ui.airport

import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.google.gson.Gson
import com.google.gson.reflect.TypeToken
import com.hi.myapplication.domain.airport.model.AirportInfoItem
import dagger.hilt.android.lifecycle.HiltViewModel
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.asStateFlow
import kotlinx.coroutines.launch
import javax.inject.Inject


@HiltViewModel
class AirportInfoViewModel @Inject constructor(
) : ViewModel() {

    private val _flightList = MutableStateFlow(emptyList<AirportInfoItem>())
    val flightList = _flightList.asStateFlow()

    fun fetchFlightList() {
        viewModelScope.launch {
            try {
                val gson = Gson()
                val InstantSchedule =
                    "[{\"expectTime\":\"09:00\",\"realTime\":\"08:52\",\"airLineName\":\"立榮航空\",\"airLineCode\":\"UIA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/B7.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=UIA\",\"airLineNum\":\"B78690\",\"upAirportCode\":\"MZG\",\"upAirportName\":\"澎湖\",\"airPlaneType\":\"AT76\",\"airBoardingGate\":\"15\",\"airFlyStatus\":\"抵達Arrived\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"09:40\",\"realTime\":\"09:40\",\"airLineName\":\"華信航空\",\"airLineCode\":\"MDA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/AE.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=MDA\",\"airLineNum\":\"AE332\",\"upAirportCode\":\"MZG\",\"upAirportName\":\"澎湖\",\"airPlaneType\":\"AT76\",\"airBoardingGate\":\"16\",\"airFlyStatus\":\"抵達Arrived\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"10:00\",\"realTime\":\"10:07\",\"airLineName\":\"華信航空\",\"airLineCode\":\"MDA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/AE.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=MDA\",\"airLineNum\":\"AE302\",\"upAirportCode\":\"KNH\",\"upAirportName\":\"金門\",\"airPlaneType\":\"AT76\",\"airBoardingGate\":\"\",\"airFlyStatus\":\"抵達Arrived\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"10:10\",\"realTime\":\"10:00\",\"airLineName\":\"立榮航空\",\"airLineCode\":\"UIA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/B7.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=UIA\",\"airLineNum\":\"B78692\",\"upAirportCode\":\"MZG\",\"upAirportName\":\"澎湖\",\"airPlaneType\":\"A321\",\"airBoardingGate\":\"17\",\"airFlyStatus\":\"抵達Arrived\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"10:30\",\"realTime\":\"10:40\",\"airLineName\":\"立榮航空\",\"airLineCode\":\"UIA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/B7.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=UIA\",\"airLineNum\":\"B78912\",\"upAirportCode\":\"KNH\",\"upAirportName\":\"金門\",\"airPlaneType\":\"AT76\",\"airBoardingGate\":\"15\",\"airFlyStatus\":\"抵達Arrived\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"10:40\",\"realTime\":\"10:30\",\"airLineName\":\"華信航空\",\"airLineCode\":\"MDA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/AE.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=MDA\",\"airLineNum\":\"AE336\",\"upAirportCode\":\"MZG\",\"upAirportName\":\"澎湖\",\"airPlaneType\":\"AT76\",\"airBoardingGate\":\"\",\"airFlyStatus\":\"抵達Arrived\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"11:30\",\"realTime\":\"11:16\",\"airLineName\":\"立榮航空\",\"airLineCode\":\"UIA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/B7.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=UIA\",\"airLineNum\":\"B78696\",\"upAirportCode\":\"MZG\",\"upAirportName\":\"澎湖\",\"airPlaneType\":\"AT76\",\"airBoardingGate\":\"13\",\"airFlyStatus\":\"抵達Arrived\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"12:20\",\"realTime\":\"12:26\",\"airLineName\":\"德安航空\",\"airLineCode\":\"DAC\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/DA.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=DAC\",\"airLineNum\":\"DA7010\",\"upAirportCode\":\"CMJ\",\"upAirportName\":\"七美\",\"airPlaneType\":\"DHC6\",\"airBoardingGate\":\"4\",\"airFlyStatus\":\"抵達Arrived\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"12:40\",\"realTime\":\"12:30\",\"airLineName\":\"立榮航空\",\"airLineCode\":\"UIA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/B7.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=UIA\",\"airLineNum\":\"B78916\",\"upAirportCode\":\"KNH\",\"upAirportName\":\"金門\",\"airPlaneType\":\"AT76\",\"airBoardingGate\":\"15\",\"airFlyStatus\":\"抵達Arrived\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"12:40\",\"realTime\":\"12:27\",\"airLineName\":\"華信航空\",\"airLineCode\":\"MDA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/AE.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=MDA\",\"airLineNum\":\"AE340\",\"upAirportCode\":\"MZG\",\"upAirportName\":\"澎湖\",\"airPlaneType\":\"AT76\",\"airBoardingGate\":\"14\",\"airFlyStatus\":\"抵達Arrived\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"13:10\",\"realTime\":\"13:25\",\"airLineName\":\"華信航空\",\"airLineCode\":\"MDA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/AE.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=MDA\",\"airLineNum\":\"AE306\",\"upAirportCode\":\"KNH\",\"upAirportName\":\"金門\",\"airPlaneType\":\"AT76\",\"airBoardingGate\":\"\",\"airFlyStatus\":\"抵達Arrived\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"13:10\",\"realTime\":\"13:04\",\"airLineName\":\"立榮航空\",\"airLineCode\":\"UIA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/B7.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=UIA\",\"airLineNum\":\"B78698\",\"upAirportCode\":\"MZG\",\"upAirportName\":\"澎湖\",\"airPlaneType\":\"A321\",\"airBoardingGate\":\"13\",\"airFlyStatus\":\"抵達Arrived\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"13:50\",\"realTime\":\"13:40\",\"airLineName\":\"華信航空\",\"airLineCode\":\"MDA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/AE.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=MDA\",\"airLineNum\":\"AE338\",\"upAirportCode\":\"MZG\",\"upAirportName\":\"澎湖\",\"airPlaneType\":\"AT76\",\"airBoardingGate\":\"12\",\"airFlyStatus\":\"抵達Arrived\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"14:20\",\"realTime\":\"14:54\",\"airLineName\":\"立榮航空\",\"airLineCode\":\"UIA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/B7.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=UIA\",\"airLineNum\":\"B78918\",\"upAirportCode\":\"KNH\",\"upAirportName\":\"金門\",\"airPlaneType\":\"AT76\",\"airBoardingGate\":\"15\",\"airFlyStatus\":\"抵達Arrived\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"15:20\",\"realTime\":\"15:17\",\"airLineName\":\"立榮航空\",\"airLineCode\":\"UIA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/B7.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=UIA\",\"airLineNum\":\"B78920\",\"upAirportCode\":\"KNH\",\"upAirportName\":\"金門\",\"airPlaneType\":\"AT76\",\"airBoardingGate\":\"13\",\"airFlyStatus\":\"抵達Arrived\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"15:40\",\"realTime\":\"15:30\",\"airLineName\":\"華信航空\",\"airLineCode\":\"MDA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/AE.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=MDA\",\"airLineNum\":\"AE342\",\"upAirportCode\":\"MZG\",\"upAirportName\":\"澎湖\",\"airPlaneType\":\"AT76\",\"airBoardingGate\":\"\",\"airFlyStatus\":\"抵達Arrived\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"16:10\",\"realTime\":\"16:00\",\"airLineName\":\"華信航空\",\"airLineCode\":\"MDA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/AE.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=MDA\",\"airLineNum\":\"AE308\",\"upAirportCode\":\"KNH\",\"upAirportName\":\"金門\",\"airPlaneType\":\"AT76\",\"airBoardingGate\":\"\",\"airFlyStatus\":\"抵達Arrived\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"16:40\",\"realTime\":\"16:30\",\"airLineName\":\"華信航空\",\"airLineCode\":\"MDA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/AE.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=MDA\",\"airLineNum\":\"AE346\",\"upAirportCode\":\"MZG\",\"upAirportName\":\"澎湖\",\"airPlaneType\":\"AT76\",\"airBoardingGate\":\"\",\"airFlyStatus\":\"抵達Arrived\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"16:45\",\"realTime\":\"16:45\",\"airLineName\":\"立榮航空\",\"airLineCode\":\"UIA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/B7.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=UIA\",\"airLineNum\":\"B78922\",\"upAirportCode\":\"KNH\",\"upAirportName\":\"金門\",\"airPlaneType\":\"AT76\",\"airBoardingGate\":\"\",\"airFlyStatus\":\"抵達Arrived\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"16:55\",\"realTime\":\"16:55\",\"airLineName\":\"德安航空\",\"airLineCode\":\"DAC\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/DA.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=DAC\",\"airLineNum\":\"DA7012\",\"upAirportCode\":\"CMJ\",\"upAirportName\":\"七美\",\"airPlaneType\":\"DHC6\",\"airBoardingGate\":\"4\",\"airFlyStatus\":\"抵達Arrived\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"17:00\",\"realTime\":\"17:00\",\"airLineName\":\"立榮航空\",\"airLineCode\":\"UIA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/B7.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=UIA\",\"airLineNum\":\"B78710\",\"upAirportCode\":\"MZG\",\"upAirportName\":\"澎湖\",\"airPlaneType\":\"AT76\",\"airBoardingGate\":\"\",\"airFlyStatus\":\"抵達Arrived\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"17:50\",\"realTime\":\"17:40\",\"airLineName\":\"華信航空\",\"airLineCode\":\"MDA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/AE.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=MDA\",\"airLineNum\":\"AE344\",\"upAirportCode\":\"MZG\",\"upAirportName\":\"澎湖\",\"airPlaneType\":\"AT76\",\"airBoardingGate\":\"\",\"airFlyStatus\":\"準時On Time\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"18:30\",\"realTime\":\"18:20\",\"airLineName\":\"華信航空\",\"airLineCode\":\"MDA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/AE.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=MDA\",\"airLineNum\":\"AE348\",\"upAirportCode\":\"MZG\",\"upAirportName\":\"澎湖\",\"airPlaneType\":\"AT76\",\"airBoardingGate\":\"\",\"airFlyStatus\":\"準時On Time\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"19:10\",\"realTime\":\"19:00\",\"airLineName\":\"華信航空\",\"airLineCode\":\"MDA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/AE.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=MDA\",\"airLineNum\":\"AE356\",\"upAirportCode\":\"MZG\",\"upAirportName\":\"澎湖\",\"airPlaneType\":\"B738\",\"airBoardingGate\":\"\",\"airFlyStatus\":\"準時On Time\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"19:20\",\"realTime\":\"19:20\",\"airLineName\":\"立榮航空\",\"airLineCode\":\"UIA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/B7.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=UIA\",\"airLineNum\":\"B78712\",\"upAirportCode\":\"MZG\",\"upAirportName\":\"澎湖\",\"airPlaneType\":\"AT76\",\"airBoardingGate\":\"\",\"airFlyStatus\":\"準時On Time\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"19:45\",\"realTime\":\"19:40\",\"airLineName\":\"華信航空\",\"airLineCode\":\"MDA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/AE.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=MDA\",\"airLineNum\":\"AE7932\",\"upAirportCode\":\"HUN\",\"upAirportName\":\"花蓮\",\"airPlaneType\":\"AT76\",\"airBoardingGate\":\"\",\"airFlyStatus\":\"準時On Time\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"20:10\",\"realTime\":\"20:10\",\"airLineName\":\"立榮航空\",\"airLineCode\":\"UIA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/B7.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=UIA\",\"airLineNum\":\"B78716\",\"upAirportCode\":\"MZG\",\"upAirportName\":\"澎湖\",\"airPlaneType\":\"AT76\",\"airBoardingGate\":\"\",\"airFlyStatus\":\"準時On Time\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"20:15\",\"realTime\":\"20:05\",\"airLineName\":\"華信航空\",\"airLineCode\":\"MDA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/AE.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=MDA\",\"airLineNum\":\"AE310\",\"upAirportCode\":\"KNH\",\"upAirportName\":\"金門\",\"airPlaneType\":\"AT76\",\"airBoardingGate\":\"\",\"airFlyStatus\":\"準時On Time\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"20:40\",\"realTime\":\"20:40\",\"airLineName\":\"立榮航空\",\"airLineCode\":\"UIA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/B7.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=UIA\",\"airLineNum\":\"B78928\",\"upAirportCode\":\"KNH\",\"upAirportName\":\"金門\",\"airPlaneType\":\"AT76\",\"airBoardingGate\":\"\",\"airFlyStatus\":\"準時On Time\",\"airFlyDelayCause\":\"\"},{\"expectTime\":\"21:15\",\"realTime\":\"21:05\",\"airLineName\":\"華信航空\",\"airLineCode\":\"MDA\",\"airLineLogo\":\"https://www.kia.gov.tw/images/airlines/AE.gif\",\"airLineUrl\":\"https://www.kia.gov.tw/AirFlyCompany.aspx?Code=MDA\",\"airLineNum\":\"AE352\",\"upAirportCode\":\"MZG\",\"upAirportName\":\"澎湖\",\"airPlaneType\":\"AT76\",\"airBoardingGate\":\"\",\"airFlyStatus\":\"準時On Time\",\"airFlyDelayCause\":\"\"}]"
                val videos: List<AirportInfoItem> = gson.fromJson(
                    InstantSchedule,
                    object : TypeToken<List<AirportInfoItem?>?>() {}.type
                )
                _flightList.value = videos
            } catch (e: Exception) {
                e.printStackTrace()
            }
        }
    }
}